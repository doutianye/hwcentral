{# This template used for readonly assignments #}

{% extends "authenticated/base.html" %}

{% load staticfiles %}
{% block title %} Assignment {% endblock title %}

{% block authenticated_body_js %}
    {# skipping protocol so that both http and https work and using most inclusive config file #}
    <script type="text/javascript"
            src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="{% static 'js/submission_id.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/charm.js' %}"></script>
    {% block submission_id_js %}{% endblock submission_id_js %}
{% endblock authenticated_body_js %}

{% block authenticated_body_css %}
    <link rel="stylesheet" href="{% static "css/submission_id.css" %}" type="text/css"/>
    <link rel="stylesheet" href="{% static "css/charm.css" %}" type="text/css"/>
    {% block submission_id_css %}{% endblock submission_id_css %}
{% endblock authenticated_body_css %}

{% block authenticated_body %}
    <div class="hidden" id="skip-global-chosen"></div>
    {% block assignment_header %}
        <div class="well row submission_well">
        <h5 class="header5 submission_header floatleft">{{ vm.authenticated_body.aql_info.title }}.
        {% block assignment_info %}
            {% if vm.authenticated_body.assignment_info %}  {# assignment info may not exist for a preview #}
                {% include 'authenticated/submission_id/assignment_info.html' with assignment_info=vm.authenticated_body.assignment_info only %}
            {% endif %}
        {% endblock assignment_info %}</h5>

        {% block revision_button %}
            {% include "authenticated/question/show_revision_button.html" only %}
        {% endblock revision_button %}

        <span class="progress-div">
        {% block submission_info %}{% endblock submission_info %}
        </span>
        </div>
        {% block revision_content %}
             {% include "modal.html" with title="Chapter Summary" content=vm.authenticated_body.revision.content modal_id="revision_modal" only %}
        {% endblock revision_content %}

    {% endblock assignment_header %}   
    <div class='row margin-top-90'>
        {% with form=vm.authenticated_body.form %}
            <form id={% block form_id %}{% endblock form_id %} method="post"
                    {% block form_action %}{% endblock form_action %}>
                {% csrf_token %}
                {{ form.non_field_errors }}
                <ol class="question_list">
                    {% for question in form.submission_vm.questions %}
                        <li class="question_elem">
                            {% block question %}
                            {% include "authenticated/question/question.html" with question=question form=form question_index=forloop.counter0 only %}
                            {% endblock question %}
                        </li>
                    {% endfor %}
                </ol>
                {% block submit_button %}{% endblock submit_button %}
            </form>
        {% endwith %}
        <a id="charm-top" class="charm" title="Go To Top">Go To Top</a>
    </div>
{% endblock authenticated_body %}
